<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>buds: Installation instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">buds
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">FORTRAN reference counted types</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Welcome to buds</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installation instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a class="el" href="installInstructions.html#installBasic">Basic Installation</a></li>
<li><a class="el" href="installInstructions.html#installAdvanced">Advanced installation</a></li>
<li><a class="el" href="installInstructions.html#installSettings">Compiler settings</a></li>
<li><a class="el" href="installInstructions.html#installFunctionality">Library functionality</a></li>
<li><a class="el" href="installInstructions.html#installVendor">Compiler vendors</a></li>
</ul>
<h1><a class="anchor" id="installBasic"></a>
Basic Installation</h1>
<p>Building buds is only controlled using the basic Makefiles included. Every setting for the compilation and installation can be controlled using the <code>setup.make</code> file.</p>
<p>If you are using the standard GNU compiler suite you may compile and install buds using the following commands: </p><pre class="fragment">make
make install PREFIX=&lt;install prefix&gt;
</pre><p>the default <code>PREFIX</code> is <code>$HOME/buds</code>.</p>
<p>This basic installation will only install the static library. To control whether the shared/static or both libraries should be installed one can do </p><pre class="fragment">make all
</pre><p>To <em>only</em> compile the shared library one should do: </p><pre class="fragment">make shared
</pre><p>The installation will install either library and the basic buds include files in the PREFIX directory.</p>
<h2><a class="anchor" id="installAdvanced"></a>
Advanced installation</h2>
<p>The actual control of the installation script can be fully controlled in the <code>setup.make</code> file. An assortment of pre-make files are created in the setup.makes directory.</p>
<p>To use one of them you may link it to <code>setup.make</code>: </p><pre class="fragment">ln -s setup.makes/static-hard.make setup.make
make
</pre><p>which will use the settings for the static library using an aggressive optimization strategy.</p>
<p>You may also denote the <code>setup.make</code> file using the <code>SETUP</code> flag: </p><pre class="fragment">make SETUP=static-hard # or
make SETUP=static-hard.make # or
make SETUP=setup.makes/static-hard.make
</pre><p>To check your current installation setup run this command: </p><pre class="fragment">make show
</pre><h2><a class="anchor" id="installSettings"></a>
Compiler settings</h2>
<p>Either of these settings may be provided on the <code>make</code> command line or in <code>setup.make</code>. In the following 0 means disable while 1 means enable.</p>
<ul>
<li><p class="startli">PREFIX=&lt;installation prefix&gt;=""&gt;:</p>
<p class="startli">installation prefix for buds.</p>
</li>
<li><p class="startli">STATIC=1|0:</p>
<p class="startli">control whether the <code>libs</code> target is dependent on the <code>static</code> target</p>
</li>
<li><p class="startli">SHARED=0|1:</p>
<p class="startli">control whether the <code>libs</code> target is dependent on the <code>shared</code> target</p>
</li>
<li><p class="startli">OPT=|debug|1|2|3:</p>
<p class="startli">controls the optimization level of the compiler. Debug is the lowest compiler options, 1 is low optimization and 3 is the highest optimization.</p>
</li>
<li><p class="startli">VENDOR=gnu|intel|&lt;vendor&gt;:</p>
<p class="startli">use the settings in the vendor/&lt;vendor&gt;.make file for the compiler (see <a class="el" href="installInstructions.html#installVendor">Compiler vendors</a>).</p>
</li>
<li><p class="startli">SETUP=&lt;file&gt;:</p>
<p class="startli">use the specified file in addition to the <code>setup.make</code> file to control the options. The corresponding file will be included in the makefile process right <em>after</em> <code>setup.make</code>.</p>
</li>
<li><p class="startli">MPI=0|1:</p>
<p class="startli">control whether the MPI objects should also be added to the library. This enables certain buds only available for MPI installations.</p>
</li>
<li><p class="startli">OO=1|0:</p>
<p class="startli">control whether the objects are OO so that there exists both regular procedures and the <code>&lt;&gt;%%&lt;procedure&gt;</code> calls. This enables object oriented programming.</p>
</li>
</ul>
<h1><a class="anchor" id="installFunctionality"></a>
Library functionality</h1>
<p>There are several preprocessor flags for controlling the final buds library. Some of them extends the functionality while others limit the functionality. Currently the preprocessor flags must be added to the CPPFLAGS variable: </p><pre class="fragment">CPPFLAGS = -D&lt;preprocessor-flag&gt;
</pre><p>Add these to the CPPFLAGS controlling</p>
<ul>
<li><p class="startli"><code>-DBUD_FORTRAN=&lt;integer&gt;</code>:</p>
<p class="startli">This controls the fortran standard used. Currently if &lt;integer&gt; is 2003 or above the basic buds will contain OO functionality as <code>bud%is_initd()</code> together with the direct function call <code>is_initd(bud)</code>.</p>
<p class="startli">This is defaulted to 2003 as the majority of compiler vendors intrinsically support these extensions.</p>
</li>
<li><p class="startli"><code>-DBUD_ERROR=&lt;routine name&gt;</code>:</p>
<p class="startli">Controls whether the parent application will provide a routine for grabbing errors. This routine should be an external routine (not in a module). The interface for this error <em>MUST</em> be </p><pre class="fragment">subroutine BUD_ERROR(str)
 character(len=*), intent(in), optional :: str
end subroutine
</pre></li>
</ul>
<h1><a class="anchor" id="installVendor"></a>
Compiler vendors</h1>
<p>The <code>vendor</code> directory contains individual files that creates defaults for different vendors. If you want to enable a new compiler you may copy the <code>vendor/gnu.make</code> to <code>vendor/&lt;new&gt;.make</code> and customize the flags to your liking.</p>
<p>Once you have created the vendor file you may use the vendor by compiling using: </p><pre class="fragment">make VENDOR=&lt;new&gt;
</pre><p>Currently only GNU and Intel compiler vendors are supported: </p><pre class="fragment">make VENDOR=gnu # default
make VENDOR=intel
</pre><p>If you add a new vendor please consider contributing to buds by adding a <a href="https://github.com/siesta-project/buds/pulls">pull request</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 6 2016 14:33:55 for buds by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
